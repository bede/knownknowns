// Nextflow configuration file

// Enable conda by default
conda.enabled = true

// Process configuration
process {
    // Default resources
    cpus = 2
    memory = '4.GB'
    time = '1.h'
    
    // Process-specific configurations
    withName: SKETCH_REFERENCES {
        cpus = 1
        memory = '2.GB'
    }
    
    withName: SKETCH_READS {
        cpus = 1 
        memory = '2.GB'
    }
    
    withName: CALCULATE_CONTAINMENT {
        cpus = 2
        memory = '4.GB'
    }
    
    withName: CREATE_VISUALIZATION {
        cpus = 1
        memory = '2.GB'
    }
}

// Profile configurations
profiles {
    standard {
        process.executor = 'local'
    }
    
    slurm {
        process {
            executor = 'slurm'
            queue = 'normal'
            clusterOptions = '--account=your_account'
        }
    }
    
    docker {
        docker.enabled = true
        conda.enabled = false
        
        process {
            withName: 'SKETCH_REFERENCES|SKETCH_READS|CALCULATE_CONTAINMENT' {
                container = 'quay.io/biocontainers/sourmash:4.8.6--hdfd78af_0'
            }
            
            withName: CREATE_VISUALIZATION {
                container = 'continuumio/miniconda3:latest'
            }
        }
    }
}

// Execution report
report {
    enabled = true
    file = "execution_report.html"
}

timeline {
    enabled = true
    file = "timeline.html"
}

trace {
    enabled = true
    file = "trace.txt"
}